<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="msapplication-TileColor" content="#0250c4"><meta name="theme-color" content="#0250c4"><meta name="msapplication-TileColor" content="#0250c4"><title>Festival Transformasi Pendidikan</title><link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co.com/tmK6GSZ/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co.com/F7TzwCP/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://i.ibb.co.com/D70CCD8/favicon-16x16.png"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"><script src="https://code.jquery.com/jquery-3.6.0.min.js"></script><script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script><script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script><link rel="manifest" href="data:application/manifest+json,{'name':'Simple PWA','short_name':'PWA','start_url':'/ftp.php','display':'standalone','background_color':'#ffffff','theme_color':'#000000','icons':[{'src':'https://via.placeholder.com/192','sizes':'192x192','type':'image/png'},{'src':'https://via.placeholder.com/512','sizes':'512x512','type':'image/png'}]}"><style>body{font-family:Arial,sans-serif;font-size:14px;padding:20px;text-align:center}helptext{font-size:9px;color:#666}h1{color:#333}</style><script>$(document).ready(function() {

      $(document).on("contextmenu", function(event) {
        event.preventDefault(); // Mencegah menu konteks muncul
      });

      const url = "https://script.google.com/macros/s/AKfycbwvEuVg0otuL2zIRtqPYl6qrvBMF6pAG_PmUSrJ7Ow6jDuijCj8K0-2I55QlLxqZ8DDHA/exec"; // Ganti dengan URL Web App Anda  

      // Inisialisasi variabel untuk langkah saat ini
      let currentStep = 1;

      // Tampilkan step pertama saat halaman dimuat
      showStep();

      $("#submitFormButton").prop("hidden", true);

      // Event listener untuk tombol kembali
      $('#boardingPassButton').on('click', function() {
        // Ambil elemen yang ingin diubah menjadi gambar (boarding pass)
        var boardingPass = $('.cetakboardingpass')[0]; // Ambil elemen sebagai DOM

        // Gunakan html2canvas untuk menangkap elemen HTML
        html2canvas(boardingPass, {
          scale: 2 // Resolusi tinggi
        }).then(function(canvas) {
          // Buat link untuk mengunduh gambar
          var link = document.createElement('a');
          link.download = 'boarding_pass.png'; // Nama file gambar
          link.href = canvas.toDataURL('image/png'); // Konversi canvas ke data URL
          link.click(); // Simulasi klik untuk mengunduh
        });
      });

      function tes() {
        fetch(url, {
          redirect: "follow",
          method: "POST",
          body: JSON.stringify("DATA"),
          headers: {
            "Content-Type": "text/plain;charset=utf-8",
          },
        })
      }

      // Fungsi untuk mendapatkan data tema menggunakan fetch
      function getTema() {
        const url = 'https://script.google.com/macros/s/AKfycbwvEuVg0otuL2zIRtqPYl6qrvBMF6pAG_PmUSrJ7Ow6jDuijCj8K0-2I55QlLxqZ8DDHA/exec?type=tema';

        // Menggunakan fetch dengan metode GET
        return fetch(url, {
            redirect: "follow",
            method: "GET",
            headers: {
              "Content-Type": "text/plain;charset=utf-8", // Header sesuai permintaan
            },
          })
          .then(response => response.json()) // Parsing response menjadi JSON
          .then(data => data.temaData) // Mengembalikan data tema
          .catch(error => {
            console.error('Error:', error);
            swal('Terjadi Kesalahan', 'Gagal mengambil data tema.', 'error');
            return []; // Kembalikan array kosong jika terjadi error
          });
      }

      // Fungsi untuk mendapatkan data kegiatan menggunakan fetch
      function getKegiatan() {
        const url = 'https://script.google.com/macros/s/AKfycbwvEuVg0otuL2zIRtqPYl6qrvBMF6pAG_PmUSrJ7Ow6jDuijCj8K0-2I55QlLxqZ8DDHA/exec?type=kegiatan';

        // Menggunakan fetch dengan metode GET
        return fetch(url, {
            redirect: "follow",
            method: "GET",
            headers: {
              "Content-Type": "text/plain;charset=utf-8", // Header sesuai permintaan
            },
          })
          .then(response => response.json()) // Parsing response menjadi JSON
          .then(data => data.kegiatanData) // Mengembalikan data tema
          .catch(error => {
            console.error('Error:', error);
            swal('Terjadi Kesalahan', 'Gagal mengambil data kegiatan.', 'error');
            return []; // Kembalikan array kosong jika terjadi error
          });
      }

      // Event listener menggunakan jQuery untuk select change
      $('#additionalSelect').on('change', function() {
        const selectedTema = $(this).val(); // Mendapatkan tema yang dipilih

        // Tampilkan swal loading saat memuat data getTema
        swal({
          title: 'Memeriksa Kuota Tema',
          text: 'Sedang menghitung kuota tema, harap tunggu...',
          icon: 'info',
          buttons: false, // Tidak ada tombol saat loading
          closeOnClickOutside: false, // Tidak bisa ditutup dengan klik di luar
          closeOnEsc: false, // Tidak bisa ditutup dengan Esc
        });

        // Ambil data tema dari API
        getTema().then(function(temaData) {

          // Tutup swal loading setelah data diterima
          swal.close();

          // Cek apakah tema yang dipilih ada di dalam temaData dan apakah total peserta melebihi 300
          const tema = temaData.find(t => t.tema === selectedTema);

          if (tema && tema.total >= 300) {

            // Jika total melebihi 300, sembunyikan opsi dan tampilkan pesan
            swal({
              icon: 'warning',
              title: 'Tema Melebihi Batas',
              text: 'Tema yang Anda pilih sudah melebihi batas peserta. Silakan pilih tema yang lain.',
              buttons: true,
              dangerMode: true,
            }).then((willReset) => {
              if (willReset) {
                // Sembunyikan opsi yang dipilih
                $('#additionalSelect option[value="' + selectedTema + '"]').hide();
                // Kembalikan ke opsi default "Pilih salah satu"
                $('#additionalSelect').val(''); // Reset pilihan
              }
            });
            $("#submitFormButton").prop("hidden", true);
          } else {
            // Jika tema masih tersedia (kurang dari 300), tampilkan swal sukses
            swal({
              icon: 'success',
              title: 'Tema Tersedia',
              text: 'Tema yang Anda pilih masih memiliki sisa kuota. Segera daftar!',
              buttons: {
                confirm: {
                  text: "Oke, Lanjutkan",
                  className: "btn btn-primary", // Kelas btn-primary dari Bootstrap
                },
              },
            });
            $("#submitFormButton").prop("hidden", false);

          }

        }).catch(function(error) {
          // Jika terjadi kesalahan, tutup swal loading dan tampilkan pesan error
          swal.close();
          swal({
            icon: 'error',
            title: 'Terjadi Kesalahan',
            text: 'Gagal memuat data tema, silakan coba lagi.',
          });
        });
      });

      // Fungsi untuk menampilkan langkah tertentu dan memperbarui stepper
      function showStep() {
        // Sembunyikan semua step
        $("#step1, #step2, #step3").hide();
        $(".nav-link").removeClass("active"); // Hapus status aktif dari semua link

        // Menentukan langkah yang aktif
        if (currentStep === 1) {
          $("#step1").show();
          updateStepLink("#step1Link", true, "NUPTK");
        } else if (currentStep === 2) {
          $("#step2").show();
          updateStepLink("#step2Link", true, "PENDAFTAR");
          updateStepLink("#step1Link", false, "1"); // Menghapus status aktif dari step 1
        } else if (currentStep === 3) {
          $("#step3").show();
          updateStepLink("#step3Link", true, "KEGIATAN");
          updateStepLink("#step2Link", false, "2"); // Menghapus status aktif dari step 2
          updateStepLink("#step1Link", false, "1"); // Menghapus status aktif dari step 1
        }
      }

      // Fungsi untuk memperbarui status link langkah
      function updateStepLink(stepId, isActive, label) {
        $(stepId).toggleClass("active", isActive); // Menetapkan kelas aktif
        if (isActive) {
          $(stepId).html(
            `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-check-circle-fill" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/></svg> <span style="color: white;">${label}</span>`
          );
        } else {
          $(stepId).html(
            `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-check-circle-fill" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/></svg> <span style="color: white;"></span>`
          );
        }
      }

      // Fungsi untuk menampilkan data pengguna di halaman (Step 2)
      function displayUserData(userData) {
        $("#nameInput").val(userData.nama); // Nama pengguna
        $(".uname").text("Hai kak, " + userData.nama); // Nama pengguna

        // Convert the userData.jabatan to lower case for comparison
        var userJabatan = userData.jabatan.toLowerCase();

        // Loop through the options to find a match
        $("#positionInput option").each(function() {
          // Compare the option value in lower case
          if ($(this).val().toLowerCase() === userJabatan) {
            $("#positionInput").val($(this).val()); // Set the value if match found
            return false; // Exit the loop
          }
        })

        $("#generationInput").val(userData.peran); // Angkatan atau peran
        $("#institutionInput").val(userData.instansi); // Instansi (editable)
        $("#districtInput").val(userData.kabupaten); // Kabupaten        

        // Data mapping jenjang to options
        const jenjangMap = {
          "01. PAUD/TK": "Taman Kanak-Kanak (TK)",
          "02. SD": "Sekolah Dasar (SD)",
          "03. SMP": "Sekolah Menengah Pertama (SMP)",
          "04. SMA": "Sekolah Menengah Atas (SMA)",
          "05. SMK": "Sekolah Menengah Kejuruan (SMK)"
        };

        // Cek apakah userData.jenjang ada di mapping
        if (jenjangMap[userData.jenjang]) {
          $("#schoolLevelInput").val(jenjangMap[userData.jenjang]); // Set input dengan jenjang yang sesuai
        } else {
          // Jika jenjang tidak ditemukan, bisa ditambahkan aksi lain misalnya alert atau default value
          $("#schoolLevelInput").val(''); // Kosongkan input jika tidak cocok
        }

        // Datalist for Autocomplete
        const datalistHtml = `
          <datalist id="schoolLevelList">
            <option value="Taman Kanak-Kanak (TK)">
            <option value="Sekolah Dasar (SD)">
            <option value="Sekolah Menengah Pertama (SMP)">
            <option value="Sekolah Menengah Atas (SMA)">
            <option value="Sekolah Menengah Kejuruan (SMK)">
            <option value="Madrasah Ibtidaiyah (MI)">
            <option value="Madrasah Tsanawiyah (MTs)">
            <option value="Madrasah Aliyah (MA)">
            <option value="Pendidikan Anak Usia Dini (PAUD)">
            <option value="Sekolah Luar Biasa (SLB)">
            <option value="Perguruan Tinggi">
          </datalist>
        `;

        // Masukkan datalist ke dalam DOM (jika diperlukan)
        $("#schoolLevelInput").after(datalistHtml);

        // Pastikan inputan tambahan kosong (jika diinginkan)
        $("#whatsappInput").val(userData.nomor_whatsapp); // Nomor WhatsApp (editable)
        $("#bankNameInput").val("");
        $("#accountNumberInput").val("");
        $("#accountNameInput").val(userData.nama);
        $("#kodeKegiatanInput").val(userData.jumlah_kegiatan);

        tampilKegiatan(userData.jumlah_kegiatan); // Tampilkan kegiatan yang tersedia
      }

      // Fungsi untuk menampilkan data registrasi di halaman (Step 2)
      function displayUserDataRegistrasi(userDataRegistrasi, userData) {

        $("#nameInput").val(userData.nama); // Nama pengguna
        $(".uname").text("Hai kak, " + userData.nama); // Nama pengguna

        generateQRCode(userData.nuptk); // Generate QR code

        // Set the value of each input field with the corresponding data from userDataRegistrasi using jQuery
        $("#regnuptk").val(userData.nuptk || "Inputan otomatis dari sistem");
        $("#regnama").val(userData.nama || "Inputan otomatis dari sistem");
        $("#regjabatan").val(userDataRegistrasi.jabatan || "Inputan otomatis dari sistem");
        $("#reginstansi").val(userDataRegistrasi.instansi || "Inputan otomatis dari sistem");
        $("#regkabupaten").val(userDataRegistrasi.kabupaten || "Inputan otomatis dari sistem");

        $("#regkodeKegiatan").val(userDataRegistrasi.kodeKegiatan || "Inputan otomatis dari sistem");
        $("#regkegiatan").val(userDataRegistrasi.kegiatan || "Inputan otomatis dari sistem");
        $("#regsubKegiatan").val(userDataRegistrasi.subKegiatan || "Inputan otomatis dari sistem");
        $("#regsubTema").val(userDataRegistrasi.subTema || "Inputan otomatis dari sistem");
      }

      // Fungsi untuk menampilkan data registrasi habis registrasi di halaman (Step 2)
      function displayUserDataRegistrasiHabisRegistrasi(nama, nuptk, jabatan, instansi, kabupaten, kodeKegiatan, kegiatan, subKegiatan, subTema) {

        $("#nameInput").val(nama); // Nama pengguna
        $(".uname").text(nama); // Nama pengguna
        $(".uname").text("Hai kak, " + nama); // Nama pengguna

        generateQRCode(nuptk); // Generate QR code

        // Set the value of each input field with the corresponding data from userDataRegistrasi using jQuery
        $("#regnuptk").val(nuptk || "Inputan otomatis dari sistem");
        $("#regnama").val(nama || "Inputan otomatis dari sistem");
        $("#regjabatan").val(jabatan || "Inputan otomatis dari sistem");
        $("#reginstansi").val(instansi || "Inputan otomatis dari sistem");
        $("#regkabupaten").val(kabupaten || "Inputan otomatis dari sistem");

        $("#regkodeKegiatan").val(kodeKegiatan || "Inputan otomatis dari sistem");
        $("#regkegiatan").val(kegiatan || "Inputan otomatis dari sistem");
        $("#regsubKegiatan").val(subKegiatan || "Inputan otomatis dari sistem");
        $("#regsubTema").val(subTema || "Inputan otomatis dari sistem");
      }

      // Fungsi untuk menghapus data registrasi di halaman (Step 2)
      function unggahNaskah() {
        // Ambil nilai dari input field
        const NUPTK = $("#regnuptk").val();
        const judulBaru = $("#judulnaskahInput").val();
        const naskahBaru = $("#naskahInput").val();
        const suratKeteranganBaru = $("#suratInput").val();

        // Ganti dengan URL Web App Anda
        const baseUrl = "https://script.google.com/macros/s/AKfycbwvEuVg0otuL2zIRtqPYl6qrvBMF6pAG_PmUSrJ7Ow6jDuijCj8K0-2I55QlLxqZ8DDHA/exec";

        // Menambahkan parameter judulBaru, naskahBaru, dan suratKeteranganBaru ke dalam URL
        const url = `${baseUrl}?NUPTK=${encodeURIComponent(NUPTK)}&judulBaru=${encodeURIComponent(judulBaru)}&naskahBaru=${encodeURIComponent(naskahBaru)}&suratKeteranganBaru=${encodeURIComponent(suratKeteranganBaru)}`;

        // Menggunakan fetch API untuk mengirim permintaan GET
        fetch(url, {
            redirect: "follow",
            method: "GET", // Menggunakan metode GET            
            headers: {
              "Content-Type": "text/plain;charset=utf-8", // Header sesuai permintaan
            },
          })
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json(); // Mengharapkan respons JSON
          })
          .then((responseData) => {
            // Log respons untuk debug
            console.log("Response Data:", responseData);

            if (responseData.status === "error") {
              console.error(responseData.message);
              alert(`Error: ${responseData.message}`);
              return;
            }

            if (responseData.status === "success") {
              swal({
                title: "Berhasil!",
                text: "Data naskah berhasil diperbarui!",
                icon: "success", // Ikon "success"
                button: "Terima kasih, Kak!",
              });
            }

          })
          .catch((error) => {
            // Log error untuk debug
            console.error("Terjadi kesalahan:", error);
            alert("Terjadi kesalahan saat memperbarui data.");
          });
      }

      // Fungsi untuk menampilkan kegiatan yang tersedia di dropdown select
      function tampilKegiatan(jumlahKegiatan) {
        // Ganti dengan URL Web App Anda
        const baseUrl = "https://script.google.com/macros/s/AKfycbwvEuVg0otuL2zIRtqPYl6qrvBMF6pAG_PmUSrJ7Ow6jDuijCj8K0-2I55QlLxqZ8DDHA/exec";

        // Menambahkan parameter jumlahKegiatan ke dalam URL
        const url = `${baseUrl}?kode=${encodeURIComponent(jumlahKegiatan)}`;

        // Menggunakan fetch API untuk mengirim permintaan GET
        fetch(url, {
            redirect: "follow",
            method: "GET", // Menggunakan metode GET            
            headers: {
              "Content-Type": "text/plain;charset=utf-8", // Header sesuai permintaan
            },
          })
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json(); // Mengharapkan respons JSON
          })
          .then((responseData) => {
            // Log respons untuk debug
            console.log("Data kegiatan:", responseData);

            // Kosongkan dropdown sebelum diisi
            $("#activitySelect").empty();
            $("#activitySelect").append('<option value="" disabled selected>Pilih Kegiatan</option>');

            // Cek jika ada kesalahan dalam respons
            if (responseData.error) {
              console.error(responseData.error);
              return;
            }

            // Tampilkan data kegiatan di dropdown select
            const kegiatan = responseData.kegiatan || [];
            kegiatan.forEach(function(activity) {
              const namaKegiatanArray = activity.nama.split(',').map(k => k.trim());

              namaKegiatanArray.forEach(function(namaKegiatan) {
                $("#activitySelect").append(
                  `<option value="${namaKegiatan}">${namaKegiatan}</option>`
                );
              });
            });
          })
          .catch((error) => {
            // Log error untuk debug
            console.error("Terjadi kesalahan:", error);
          });
      }

      // Fungsi untuk mengambil data naskah berdasarkan NUPTK dan set ke input
      function getNaskah(NUPTK) {
        // Ganti dengan URL Web App Anda
        const baseUrl = "https://script.google.com/macros/s/AKfycbwvEuVg0otuL2zIRtqPYl6qrvBMF6pAG_PmUSrJ7Ow6jDuijCj8K0-2I55QlLxqZ8DDHA/exec";

        // Menambahkan parameter NUPTK ke dalam URL
        const url = `${baseUrl}?NUPTK=${encodeURIComponent(NUPTK)}`;

        // Menggunakan fetch API untuk mengirim permintaan GET
        fetch(url, {
            redirect: "follow",
            method: "GET",
            headers: {
              "Content-Type": "text/plain;charset=utf-8",
            },
          })
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json(); // Mengharapkan respons JSON
          })
          .then((responseData) => {
            // Cek jika ada kesalahan dalam respons
            if (responseData.status !== "success") {
              console.error("Data naskah tidak ditemukan atau terjadi kesalahan.");
              return;
            }

            // Tampilkan data naskah di input form
            const naskahData = responseData;

            // Isi input field dengan data naskah
            $("#judulnaskahInput").val(naskahData.judulNaskah); // Mengisi input judul naskah
            $("#naskahInput").val(naskahData.naskah); // Mengisi input naskah
            $("#suratInput").val(naskahData.suratKeterangan); // Mengisi input surat keterangan

          })
          .catch((error) => {
            console.error("Terjadi kesalahan:", error);
          });
      }

      // Fungsi format nomor WhatsApp
      function formatWhatsApp(number) {
        // Hapus karakter selain angka
        number = number.replace(/\D/g, '');

        // Cek apakah nomor dimulai dengan 08
        if (number.startsWith('08')) {
          // Ganti 08 dengan 62
          number = '62' + number.slice(1);
        } else if (!number.startsWith('62')) {
          // Jika nomor tidak dimulai dengan 62, tambahkan 62 di depan
          number = '62' + number;
        }

        // Kembalikan nomor yang telah diformat
        return number;
      }

      // Fungsi untuk menghasilkan QR code
      function generateQRCode(qrtext) {
        // Clear the previous QR code
        $('#qrcode').empty();

        // Get the input text
        var qrText = qrtext;

        // Generate the QR code with custom styles
        if (qrText) {
          var qrcode = new QRCode(document.getElementById("qrcode"), {
            text: qrText,
            width: 200, // QR code width
            height: 200, // QR code height            
            correctLevel: QRCode.CorrectLevel.H // Error correction level
          });

        }
      }

      // Ketika tombol "Sedang diverifikasi" diklik
      $(".btnDiverifikasi").click(function() {
        swal({
          title: "Sedang Diverifikasi",
          text: "Proses verifikasi pendaftaran kakak sedang berlangsung. Harap tunggu.",
          icon: "info",
          button: {
            text: "Terima kasih, kak!",
            className: "btn btn-primary"
          }
        });
      });

      // Ketika tombol "Terdaftar / Lulus" diklik
      $(".btnTerdaftar").click(function() {
        swal({
          title: "Terdaftar",
          text: "Selamat! Kakak telah terdaftar / lulus.",
          icon: "success",
          button: {
            text: "Terima kasih, kak!",
            className: "btn btn-primary"
          }
        });
      });

      // Ketika tombol "Tidak terdaftar / Tidak Lulus" diklik
      $(".btnTidakTerdaftar").click(function() {
        swal({
          title: "Tidak Terdaftar",
          text: "Maaf, Kakak tidak terdaftar atau tidak lulus.",
          icon: "error",
          button: {
            text: "Terima kasih, kak!",
            className: "btn btn-primary"
          }
        });
      });

      // Batasi input hanya angka dan maksimal 16 digit
      $('#NUPTK').on('input', function() {
        var value = $(this).val().replace(/[^0-9]/g, ''); // Hanya izinkan angka
        if (value.length > 16) {
          value = value.slice(0, 16); // Batasi maksimal 16 digit
        }
        $(this).val(value);
        $("#message")
          .text("")
          .addClass("text-red-500");
      });

      // Validasi NUPTK saat blur
      $('#NUPTK').on('blur', function() {
        var value = $(this).val();
        if (value.length !== 16) {
          $("#message")
            .text("NUPTK harus berupa 16 digit angka.")
            .addClass("text-red-500");
        }
      });

      // Step 1: Validasi NUPTK
      $("#checkButton").click(function() {
        $("#loading").show(); // Tampilkan spinner loading
        $("#checkButton").prop("disabled", true).text("Proses Verifikasi...");

        const NUPTK = $("#NUPTK").val();

        // cek nuptk kosong
        if (NUPTK == "") {
          swal({
            title: "Hai, kak!",
            text: "NUPTK harus lengkap sebelum melanjutkan.",
            icon: "error",
            button: {
              text: "Oke, Siap ka!",
              className: "btn btn-primary",
              closeModal: true
            }
          });
          $("#loading").hide(); // Sembunyikan spinner
          $("#checkButton").prop("disabled", false).text("Verifikasi kembali");
          return;
        }

        // Kirim NUPTK ke Google Apps Script untuk validasi        
        const params = {
          NUPTK: NUPTK,
        };

        // Tampilkan SweetAlert dengan hitung mundur
        let countdown = 15;
        swal({
          title: "Proses Verifikasi",
          text: `Kami sedang memverifikasi NUPTK ${NUPTK} (Tunggu hingga : ${countdown} detik)`,
          icon: "info",
          buttons: false,
          closeOnClickOutside: false,
          closeOnEsc: false,
        });

        // Mulai hitung mundur setiap 1 detik
        const countdownInterval = setInterval(function() {
          countdown--;
          swal({
            title: "Proses Verifikasi",
            text: `Kami sedang memverifikasi NUPTK (Tunggu hingga : ${countdown} detik)`,
            icon: "info",
            buttons: false,
            closeOnClickOutside: false,
            closeOnEsc: false,
          });

          // Jika countdown selesai, hentikan interval
          if (countdown === 0) {
            clearInterval(countdownInterval);

            // Tampilkan swal dengan tombol Verifikasi Lagi
            swal({
              title: "Waktu Habis",
              text: "Tidak ada respon dari server, coba verifikasi lagi.",
              icon: "warning",
              buttons: {
                retry: {
                  text: "Verifikasi Lagi",
                  className: "btn btn-primary", // Bootstrap class
                  closeModal: true // Tutup swal setelah tombol diklik
                }
              }
            }).then((value) => {
              if (value === "retry") {
                // Mulai ulang proses verifikasi ketika tombol diklik
                $("#checkButton").trigger("click");
              }
            });
          }
        }, 1000);

        // Menggunakan fetch API untuk mengirim permintaan POST
        fetch(url, {
            redirect: "follow",
            method: "POST",
            body: JSON.stringify(params),
            headers: {
              "Content-Type": "text/plain;charset=utf-8",
            },
          })
          .then((response) => {
            $("#loading").hide();
            $("#checkButton").prop("disabled", false).text("Cek NUPTK");

            clearInterval(countdownInterval);

            if (!response.ok) {
              throw new Error("Jaringan bermasalah. Coba lagi nanti.");
            }

            return response.json();
          })
          .then((response) => {
            console.log("Respons dari server:", response);

            // Handling response statuses
            if (response.status === "invalid") {
              swal({
                title: "NUPTK Tidak Terdaftar",
                text: "Kakak tidak bisa melanjutkan.",
                icon: "error",
                button: {
                  text: "OK",
                  className: "btn btn-primary",
                  closeModal: true
                }
              }).then(() => {
                $("#message").text("NUPTK tidak terdaftar. Anda tidak bisa melanjutkan.").addClass("text-red-500");
                $("#NUPTK").val("");
              });

            } else if (response.status === "registered") {
              // Logika ketika NUPTK sudah terdaftar
              const userDataRegistrasi = response.userDataRegistrasi;
              const userData = response.userData;

              displayUserDataRegistrasi(userDataRegistrasi, userData);

              swal({
                title: "NUPTK Sudah Terdaftar",
                text: "NUPTK sudah terdaftar pada kegiatan " + userDataRegistrasi.kegiatan,
                icon: "warning",
                button: {
                  text: "Lihat detail kegiatan",
                  className: "btn btn-primary",
                  closeModal: true
                }
              }).then(() => {
                $("#message").text("NUPTK sudah terdaftar untuk kegiatan.").addClass("text-red-500");
                $(".forma").prop("hidden", true);
                $(".formc").prop("hidden", false);

                if (userDataRegistrasi.subTema === "Tidak Dipilih") {
                  $(".formunggah").prop("hidden", true);
                } else {
                  $(".formunggah").prop("hidden", false);
                }
              });

            } else if (response.status === "valid") {
              swal({
                title: "NUPTK Valid",
                text: "Silakan lanjut ke langkah berikutnya.",
                icon: "success",
                button: {
                  text: "Siap, kakak",
                  className: "btn btn-primary",
                  closeModal: true
                }
              }).then(() => {
                $("#message").text("NUPTK valid. Silakan lanjut ke langkah berikutnya.").removeClass("text-red-500").addClass("text-green-500");

                const userData = response.userData;
                displayUserData(userData);

                currentStep = 2;
                showStep();
              });
            }
          })
          .catch((error) => {
            $("#loading").hide();
            $("#checkButton").prop("disabled", false).text("Cek NUPTK");

            clearInterval(countdownInterval);

            console.log("Error details:", error);

            let errorMessage = "Terjadi kesalahan.";
            if (error.message.includes("Jaringan bermasalah")) {
              errorMessage = "Tidak bisa terhubung ke server. Periksa koneksi internet Anda.";
            }

            swal({
              title: "Error",
              text: errorMessage,
              icon: "error",
              button: {
                text: "Siap, kak!",
                className: "btn btn-primary",
                closeModal: true
              }
            });

            $("#message").text(errorMessage).addClass("text-red-500");
          });
      });

      // Step 2: Lanjutkan ke Pilih Kegiatan
      $("#nextButton").click(function() {

        // Ambil nilai dari semua input
        const jenjang = $("#schoolLevelInput").val(); // Jenjang sekolah
        const position = $("#positionInput").val(); // Get the selected value
        const institution = $("#institutionInput").val().trim();
        const district = $("#districtInput").val().trim();
        const whatsapp = $("#whatsappInput").val().trim();
        const bankName = $("#bankNameInput").val().trim();
        const accountNumber = $("#accountNumberInput").val().trim();
        const accountName = $("#accountNameInput").val().trim();

        // Validasi: Pastikan semua field terisi
        if (jenjang == "" || position == "" || position == null || !institution || !district || !whatsapp || !bankName || !accountNumber || !accountName) {
          swal({
            title: "Hai, kak!",
            text: "Semua data harus terisi sebelum melanjutkan.",
            icon: "error",
            button: {
              text: "Ok siap", // Label tombol
              className: "btn btn-primary", // Menggunakan kelas btn-primary Bootstrap 5
              closeModal: true // Tutup swal setelah tombol diklik
            }
          });

          return; // Hentikan eksekusi jika ada field yang kosong
        }

        // Jika semua field terisi, lanjutkan ke langkah berikutnya
        currentStep = 3;
        showStep();
      });

      // Step 3: Daftar kegiatan
      $("#submitFormButton").click(function() {

        const selectedActivity = $("#activitySelect").val(); // Kegiatan yang dipilih
        var subKegiatan = "Tidak Dipilih"; // Tipe kegiatan tambahan (jika ada)
        var subTema = "Tidak Dipilih"; // Tema kegiatan tambahan (jika ada)

        // Cek jika "Upgrading Kepemimpinan Pembelajaran" dipilih
        if (selectedActivity === 'Upgrading Kepemimpinan Pembelajaran') {
          // Tampilkan opsi tambahan
          subKegiatan = $("#additionalSelect2").val() || subKegiatan; // Ambil tipe kegiatan tambahan (jika ada)
          subTema = $("#additionalSelect").val() || subTema; // Ambil tipe tema kegiatan tambahan (jika ada)
        }

        const NUPTK = $("#NUPTK").val(); // NUPTK yang diinputkan
        const jabatan = $("#positionInput").val(); // Jabatan dari input
        const instansi = $("#institutionInput").val(); // Ambil instansi dari input
        const jenjang = $("#schoolLevelInput").val(); // Ambil jenjang sekolah dari input
        const kabupaten = $("#districtInput").val(); // Ambil kabupaten dari input
        const whatsapp = formatWhatsApp($("#whatsappInput").val()); // Ambil nomor WhatsApp dari input
        const bankName = $("#bankNameInput").val(); // Ambil nama bank dari input
        const accountNumber = $("#accountNumberInput").val(); // Ambil nomor rekening dari input
        const accountName = $("#accountNameInput").val(); // Ambil atas nama rekening dari input
        const kodeKegiatan = $("#kodeKegiatanInput").val(); // Ambil kode kegiatan (misalnya dari input)

        displayUserDataRegistrasiHabisRegistrasi($("#nameInput").val(), NUPTK, jabatan, instansi, kabupaten, kodeKegiatan, selectedActivity, subKegiatan, subTema);

        // Membangun data yang akan dikirim
        const params = {
          NUPTK: NUPTK,
          activity: selectedActivity,
          jabatan: jabatan,
          instansi: instansi,
          jenjang: jenjang,
          kabupaten: kabupaten,
          whatsapp: whatsapp,
          bankName: bankName,
          accountNumber: accountNumber,
          accountName: accountName,
          kode: kodeKegiatan, // Jika ada input untuk kode kegiatan
          subKegiatan: subKegiatan, // Jika ada input untuk tipe kegiatan tambahan
          subTema: subTema // Jika ada input untuk tema kegiatan tambahan
        };

        // Tampilkan SweetAlert dengan hitung mundur 10 detik
        let countdown = 15;
        swal({
          title: "Menunggu Memproses Pendaftaran",
          text: `Kami sedang memproses pendaftaran.. (Tunggu hingga: ${countdown} detik)`,
          icon: "info",
          buttons: false,
          closeOnClickOutside: false,
          closeOnEsc: false,
        });

        const countdownInterval = setInterval(function() {
          countdown--;
          swal({
            title: "Menunggu Proses Pendaftaran",
            text: `Kami sedang memproses pendaftaran.. (Tunggu hingga: ${countdown} detik)`,
            icon: "info",
            buttons: false,
            closeOnClickOutside: false,
            closeOnEsc: false,
          });

          // Jika countdown selesai, hentikan interval dan tampilkan tombol "Proses Kembali"
          if (countdown === 0) {
            clearInterval(countdownInterval);
            swal({
                title: "Proses Lama!",
                text: "Tidak ada respons dalam waktu 10 detik. Ingin mencoba kembali?",
                icon: "warning",
                buttons: {
                  retry: {
                    text: "Proses Kembali",
                    value: "retry",
                    className: "btn btn-primary",
                  },
                  cancel: {
                    text: "Batal",
                    value: "cancel",
                    className: "btn btn-secondary",
                    closeModal: true,
                  },
                },
                closeOnClickOutside: false,
                closeOnEsc: false,
              })
              .then((value) => {
                if (value === "retry") {
                  // Jika tombol "Proses Kembali" diklik, panggil kembali fungsi yang memproses pendaftaran
                  $("#submitFormButton").click();
                }
              });
          }
        }, 1000);

        // Kirim data pendaftaran menggunakan fetch
        fetch(url, {
            redirect: "follow",
            method: "POST",
            body: JSON.stringify(params), // Data dalam format JSON
            headers: {
              "Content-Type": "text/plain;charset=utf-8", // Menggunakan text/plain untuk menghindari masalah CORS
            },
          })
          .then(response => {
            if (!response.ok) {
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json(); // Mengharapkan respons dalam format JSON
          })
          .then(response => {
            clearInterval(countdownInterval); // Hentikan hitung mundur jika respons diterima

            // Hapus spinner dan kembalikan tombol ke status awal
            $("#submitFormButton").prop("disabled", false).text("Daftar");

            // Menangani respons dari server
            if (response.status === "success") {
              swal({
                title: "Pendaftaran Berhasil, Kak!",
                text: response.message,
                icon: "success",
                button: {
                  text: "Siap terima kasih", // Label tombol
                  className: "btn btn-primary", // Menggunakan kelas btn-primary Bootstrap 5
                  closeModal: true // Tutup swal setelah tombol diklik
                }
              }).then(() => {
                $(".forma").prop("hidden", true); // Menyembunyikan Form A
                //$(".formb").prop("hidden", false); // Menampilkan Form B
                $(".formc").prop("hidden", false); // Menampilkan Form C  

                generateQRCode(NUPTK); // Generate QR code

                // Tampilkan dropdown tema simposium jika tipe kegiatan adalah "Simposium"
                if (subKegiatan === "Simposium") {
                  $(".formunggah").prop("hidden", false); // Menampilkan Form C              
                }

                $("#message")
                  .text(response.message)
                  .addClass("text-green-500")
                  .removeClass("text-muted");
              });

            } else {
              swal({
                title: "Pendaftaran Gagal, Kak!",
                text: "Kakak hanya boleh mendaftar 1 kegiatan, ya!",
                icon: "error",
                button: {
                  text: "Siap kak!", // Label tombol
                  className: "btn btn-primary", // Menggunakan kelas btn-primary Bootstrap 5
                  closeModal: true // Tutup swal setelah tombol diklik
                }
              }).then(() => {
                $("#message")
                  .text("Pendaftaran gagal.")
                  .addClass("text-danger")
                  .removeClass("text-muted");
              });

            }
          })
          .catch(error => {
            clearInterval(countdownInterval); // Hentikan hitung mundur jika ada error

            // Hapus spinner dan kembalikan tombol ke status awal
            $("#submitFormButton").prop("disabled", false).text("Daftar sekarang");
            swal({
              title: "Terjadi Kesalahan, Kak!",
              text: "Coba mendaftar lagi, kakak.",
              icon: "error",
              button: {
                text: "OK", // Label tombol
                className: "btn btn-primary", // Menggunakan kelas btn-primary Bootstrap 5
                closeModal: true // Tutup swal setelah tombol diklik
              }
            }).then(() => {
              $("#message")
                .text("Terjadi kesalahan: " + error.message)
                .addClass("text-danger")
                .removeClass("text-muted");
            });

          });
      });

      // Step 4: Unggah Naskah
      $("#unggahNaskahButton").click(function() {

        // cek jika empty
        if ($("#judulnaskahInput").val() == "" || $("#naskahInput").val() == "" || $("#suratInput").val() == "") {
          swal({
            title: "Hai, kak!",
            text: "Semua data naskah harus terisi sebelum mengunggah.",
            icon: "error",
            button: {
              text: "Ok siap", // Label tombol
              className: "btn btn-primary", // Menggunakan kelas btn-primary Bootstrap 5
              closeModal: true // Tutup swal setelah tombol diklik
            }
          });

          return; // Hentikan eksekusi jika ada field yang kosong

        } else {

          unggahNaskah();
        }

      });

      // Fungsi untuk membatasi input hanya angka
      $('#whatsappInput').on('input', function() {
        var value = $(this).val().replace(/[^0-9]/g, ''); // Hanya izinkan angka
        if (value.length > 0 && value[0] !== '0') {
          value = '0' + value.slice(1); // Pastikan dimulai dengan 0
        }
        $(this).val(value);
      });

      // Fungsi untuk membatasi input hanya angka
      $('#accountNumberInput').on('input', function() {
        // Hapus karakter yang bukan angka
        this.value = this.value.replace(/[^0-9]/g, '');
      });

      // Fungsi untuk membuka link naskah menggunakan jQuery    
      $('#cekNaskahBtn').on('click', function() {
        const naskahLink = $('#naskahInput').val(); // Mendapatkan nilai dari input dengan jQuery
        if (naskahLink) {
          // Membuka link di tab baru
          window.open(naskahLink, '_blank');
        } else {
          // Menggunakan SweetAlert untuk menampilkan pesan kesalahan
          swal({
            title: "Link Tidak Ditemukan!",
            text: "Harap masukkan link naskah terlebih dahulu.",
            icon: "warning",
            button: {
              text: "OK", // Label tombol
              className: "btn btn-primary", // Menggunakan kelas btn-primary Bootstrap 5
              closeModal: true // Tutup swal setelah tombol diklik
            }
          });

        }
      });

      // Fungsi untuk membuka link surat pernyataan
      $('#cekSuratBtn').on('click', function() {
        const suratLink = $('#suratInput').val();
        if (suratLink) {
          // Membuka link di tab baru
          window.open(suratLink, '_blank');
        } else {
          // Menggunakan SweetAlert untuk menampilkan pesan jika link tidak ada
          swal({
            title: "Link Tidak Ditemukan!",
            text: "Harap masukkan link surat pernyataan terlebih dahulu.",
            icon: "warning",
            button: {
              text: "OK, kak!", // Label tombol
              className: "btn btn-primary", // Menggunakan kelas btn-primary Bootstrap 5
              closeModal: true // Tutup swal setelah tombol diklik
            }
          });

        }
      });

      // Fungsi untuk menampilkan data kegiatan berdasarkan NUPTK
      const activities = [{
          nama: 'Upgrading Kepemimpinan Pembelajaran'
        },
        {
          nama: 'Transformasi Pendidikan Melalui Kurikulum Merdeka : Refleksi, Inovasi Gelar Karya dan Praktik Baik'
        },
        {
          nama: 'Praktik Baik Penggiat PKB Literasi Numerasi di Daerah'
        },
        {
          nama: 'Praktik Baik Pengembangan Kompetensi Sesuai dengan Kebutuhan Belajar'
        }
        // Tambahkan kegiatan lainnya
      ];

      // Isi select dengan kegiatan dinamis
      activities.forEach(function(activity) {
        $("#activitySelect").append(
          `<option value="${activity.nama}">${activity.nama}</option>`
        );
      });

      // Ketika kegiatan dipilih
      $("#activitySelect").change(function() {
        const selectedActivity = $(this).val(); // Ambil kegiatan yang dipilih

        // Tampilkan swal loading
        swal({
          title: "Memeriksa kuota kegiatan...",
          text: "Mohon tunggu sebentar",
          icon: "info",
          buttons: false, // Tidak ada tombol, pengguna tidak bisa menutup swal
          closeOnClickOutside: false,
          closeOnEsc: false,
        });

        // Panggil fungsi getKegiatan untuk mendapatkan data kuota kegiatan
        getKegiatan().then((kegiatanData) => {
          // Temukan kegiatan yang dipilih dari data kegiatan yang diambil
          const selectedKegiatanData = kegiatanData.find(kegiatan => kegiatan.kegiatan === selectedActivity);

          // Jika kegiatan ditemukan, cek kuotanya
          if (selectedKegiatanData) {
            const totalPeserta = selectedKegiatanData.total;
            const limitPeserta = selectedKegiatanData.limit;
            const isTutup = selectedKegiatanData.tutup;

            // Cek apakah kegiatan sudah ditutup atau peserta sudah mencapai batas kuota
            if (isTutup === "ya" || totalPeserta >= limitPeserta) {
              // Jika kuota penuh atau kegiatan ditutup, tampilkan pesan peringatan
              swal({
                title: "Maaf, kuota penuh!",
                text: `Peserta untuk kegiatan "${selectedActivity}" telah memenuhi batas kuota.`,
                icon: "error",
                button: {
                  text: "Yah, terima kasih kakak!",
                  className: "btn btn-primary",
                  closeModal: true
                }
              });

              $("#submitFormButton").prop("hidden", true);

              // Reset atau sembunyikan bagian form pendaftaran
              $("#additionalOptions").hide();
              $("#additionalSelect").val("");
              $("#additionalSelect2").val("");
              $("#additionalOptions2").hide();

            } else {
              // Jika kuota masih tersedia, izinkan melanjutkan pendaftaran
              swal({
                title: "Kuota masih tersedia!",
                text: `Anda dapat melanjutkan pendaftaran untuk kegiatan "${selectedActivity}".`,
                icon: "success",
                button: {
                  text: "Lanjutkan...",
                  className: "btn btn-primary",
                  closeModal: true
                }
              });

              $("#submitFormButton").prop("hidden", false);

              // Tampilkan opsi tambahan jika kegiatan tertentu dipilih
              if (selectedActivity === 'Upgrading Kepemimpinan Pembelajaran') {

                $("#additionalOptions2").show();

                $("#additionalSelect2").val("");

                $("#additionalSelect").val("");

              } else {

                $("#additionalOptions").hide();

                $("#additionalSelect2").val("");

                $("#additionalSelect").val("");

                $("#additionalOptions2").hide();

              }
            }
          } else {
            // Jika kegiatan tidak ditemukan di data (untuk menghindari error)
            swal({
              title: "Kegiatan tidak ditemukan",
              text: "Kegiatan yang dipilih tidak tersedia.",
              icon: "error",
              button: {
                text: "Oke",
                className: "btn btn-primary",
                closeModal: true
              }
            });
          }
        });
      });

      // Event handler untuk dropdown tipe kegiatan
      $("#additionalSelect2").change(function() {
        const selectedType = $(this).val();

        // Tampilkan dropdown tema simposium jika tipe kegiatan adalah "Simposium"
        if (selectedType === "Simposium") {
          $("#additionalOptions").show();
        } else {
          $("#additionalOptions").hide();
          $("#additionalSelect").val(""); // Reset pilihan tema simposium

          // Tampilkan swal loading
          swal({
            title: "Memeriksa kuota kegiatan...",
            text: "Mohon tunggu sebentar",
            icon: "info",
            buttons: false, // Tidak ada tombol, pengguna tidak bisa menutup swal
            closeOnClickOutside: false,
            closeOnEsc: false,
          });

          // Panggil getKegiatan untuk mengecek kuota jika bukan "Simposium"
          getKegiatan().then((kegiatanData) => {
            const selectedKegiatanData = kegiatanData.find(kegiatan => kegiatan.kegiatan === selectedType);

            // Jika kegiatan ditemukan, cek kuotanya
            if (selectedKegiatanData) {
              const totalPeserta = selectedKegiatanData.total;
              const limitPeserta = selectedKegiatanData.limit;
              const isTutup = selectedKegiatanData.tutup;

              // Cek apakah kuota sudah penuh atau kegiatan ditutup
              if (isTutup === "ya" || totalPeserta >= limitPeserta) {
                swal({
                  title: "Maaf, kuota penuh!",
                  text: `Peserta untuk kegiatan "${selectedType}" telah memenuhi batas kuota.`,
                  icon: "error",
                  button: {
                    text: "Yah, terima kasih kakak!",
                    className: "btn btn-primary",
                    closeModal: true
                  }
                });

                $("#submitFormButton").prop("hidden", true);

              } else {
                // Jika kuota masih tersedia, izinkan melanjutkan pendaftaran
                swal({
                  title: "Kuota masih tersedia!",
                  text: `Kuota masih tersedia untuk kegiatan "${selectedType}".`,
                  icon: "success",
                  button: {
                    text: "Lanjutkan...",
                    className: "btn btn-primary",
                    closeModal: true
                  }
                });

                $("#submitFormButton").prop("hidden", false);
              }
            } else {
              // Jika kegiatan tidak ditemukan di data (untuk menghindari error)
              swal({
                title: "Kegiatan tidak ditemukan",
                text: "Kegiatan yang dipilih tidak tersedia.",
                icon: "error",
                button: {
                  text: "Oke",
                  className: "btn btn-primary",
                  closeModal: true
                }
              });
            }
          }).catch((error) => {
            // Jika ada error saat mengambil data, tampilkan pesan error
            swal({
              title: "Error",
              text: "Terjadi kesalahan saat memeriksa kuota kegiatan.",
              icon: "error",
              button: {
                text: "Oke",
                className: "btn btn-primary",
                closeModal: true
              }
            });
          });
        }
      });

    });</script><script type="module">// Import the functions you need from the SDKs you need

    import {
      initializeApp
    } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";

    import {
      getAnalytics
    } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js";

    // TODO: Add SDKs for Firebase products that you want to use

    // https://firebase.google.com/docs/web/setup#available-libraries


    // Your web app's Firebase configuration

    // For Firebase JS SDK v7.20.0 and later, measurementId is optional

    const firebaseConfig = {

      apiKey: "AIzaSyDeS5BadrSYII-myCE2ff1Zaj7lYTd2Jxo",

      authDomain: "festivaltransformasipendidikan.firebaseapp.com",

      projectId: "festivaltransformasipendidikan",

      storageBucket: "festivaltransformasipendidikan.appspot.com",

      messagingSenderId: "656801924157",

      appId: "1:656801924157:web:699c202614dc0658599654",

      measurementId: "G-CD00CT495M"

    };


    // Initialize Firebase

    const app = initializeApp(firebaseConfig);

    const analytics = getAnalytics(app);</script><style>#stepper{display:flex;justify-content:center;list-style-type:none;padding:0}#stepper .nav-item{margin:2px}#stepper .nav-link{display:inline-flex;align-items:center;padding:5px 10px;border-radius:5px;background-color:#007bff;color:#fff;text-decoration:none}#stepper .nav-link svg{margin-right:2px}#stepper .nav-link.disabled{background-color:#6c757d;cursor:not-allowed}#stepper .nav-link{display:inline-flex;align-items:center;padding:10px 20px;border-radius:5px;background-color:#007bff;color:#fff;text-decoration:none;font-size:9px}#stepper .nav-link svg{margin-right:8px;width:14px;height:14px}</style></head><body class="bg-primary"><div class="header-container container mb-3"><a target="_blank" href="https://bbgpjateng.kemdikbud.go.id/"><img src="https://i.ibb.co.com/6mwY2Rk/LOGO-FESTIVAL-TPAsset-3.png" class="mt-3" width="180px" alt="bbgpjateng" border="0"></a><div class="mt-3 text-white"><span class="badge text-bg-light uname">Hai kak, Selamat datang</span></div></div><div class="container p-5 bg-light rounded shadow forma"><h1 class="mb-4 fw-bold h3 text-dark lead">Pendaftaran Kegiatan</h1><input type="text" id="kodeKegiatanInput" hidden><ul class="nav nav-pills mb-4" id="stepper"><li class="nav-item"><a class="nav-link active fw-bold text-white" id="step1Link"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-patch-check-fill" viewBox="0 0 16 16"><path d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01zm.287 5.984-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708.708"/></svg></a></li><li class="nav-item"><a class="nav-link active fw-bold text-white h6" id="step2Link" href="#" tabindex="-1" aria-disabled="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-badge-fill" viewBox="0 0 16 16"><path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zm4.5 0a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zM8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6m5 2.755C12.146 12.825 10.623 12 8 12s-4.146.826-5 1.755V14a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1z"/></svg></a></li><li class="nav-item"><a class="nav-link active fw-bold text-white" id="step3Link" href="#" tabindex="-1" aria-disabled="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-dash-fill" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5M6 6a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z"/></svg></a></li></ul><div id="step1"><label for="NUPTK" class="form-label">Masukkan ID Pendaftaran (NUPTK/NIK)</label><div class="form-floating mb-3"><input type="text" inputmode="numeric" id="NUPTK" required class="form-control" placeholder="NUPTK"><label for="NUPTK">NUPTK/NIK</label><div class="input-group-append mt-3"><div class="d-grid gap-2 mb-2"><button id="checkButton" class="btn btn-primary gradient-button fw-bold" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-patch-check-fill" viewBox="0 0 16 16"><path d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01zm.287 5.984-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708.708"/></svg>Verifikasi</button></div></div></div><p id="message" class="mt-3"></p><div id="loading" class="text-muted mt-2"></div></div><div id="step2" class="hidden text-left" style="display:none"><div class="form-floating mb-3"><input type="text" class="form-control" id="nameInput" placeholder="Nama Lengkap" disabled="disabled" value="Nama tidak bisa diedit"><label for="nameInput">Nama Lengkap</label></div><div class="form-floating mb-3"><input type="text" class="form-control" id="generationInput" placeholder="Peran" disabled="disabled" value="Peran"><label for="generationInput">Peran</label></div><hr><div class="form-floating mb-3"><select id="positionInput" class="form-select" aria-label="Pilih Jabatan Anda"><option value="" disabled="disabled" selected="selected">Pilih Jabatan Anda</option><option value="Guru">Guru</option><option value="Kepala Sekolah">Kepala Sekolah</option><option value="Wakil Kepala Sekolah">Wakil Kepala Sekolah</option><option value="Pengawas Sekolah">Pengawas Sekolah</option><option value="Tenaga Pendidik Lainnya">Tenaga Pendidik Lainnya</option></select><label for="positionInput">Pilih jabatan sesuai posisi saat ini</label></div><div class="form-floating mb-3 mt-3"><input type="text" id="institutionInput" class="form-control" placeholder="Isi instansi Anda" required><label for="institutionInput">Instansi sesuai tempat bekerja saat ini</label></div><div class="form-floating mb-3 mt-3"><input type="text" id="schoolLevelInput" class="form-control" placeholder="Pilih Jenjang Sekolah" list="schoolLevelList" required><label for="schoolLevelInput">Jenjang Sekolah</label></div><datalist id="schoolLevelList"><option value="Taman Kanak-Kanak (TK)"><option value="Sekolah Dasar (SD)"><option value="Sekolah Menengah Pertama (SMP)"><option value="Sekolah Menengah Atas (SMA)"><option value="Sekolah Menengah Kejuruan (SMK)"><option value="Madrasah Ibtidaiyah (MI)"><option value="Madrasah Tsanawiyah (MTs)"><option value="Madrasah Aliyah (MA)"><option value="Pendidikan Anak Usia Dini (PAUD)"><option value="Sekolah Luar Biasa (SLB)"><option value="Perguruan Tinggi"></datalist><div class="form-floating mb-3 mt-3"><input type="text" id="districtInput" class="form-control" placeholder="Isi kabupaten Anda" required><label for="districtInput">Kabupaten/Kota sesuai wilayah kerja saat ini.</label></div><div class="form-floating mb-3 mt-3"><input type="text" inputmode="numeric" id="whatsappInput" class="form-control" placeholder="0821xxxxxx" required><label for="whatsappInput">Nomor WhatsApp</label></div><hr><div class="form-floating mb-3 mt-3"><input type="text" id="bankNameInput" class="form-control" placeholder="Nama Bank Anda" list="bankList" required><label for="bankNameInput">Nama Bank</label></div><datalist id="bankList"><option value="Bank Negara Indonesia (BNI)"><option value="Bank Rakyat Indonesia (BRI)"><option value="Bank Mandiri"><option value="Bank Tabungan Negara (BTN)"><option value="Bank Syariah Indonesia (BSI)"><option value="Bank Jateng"><option value="Bank BPR"><option value="Bank Central Asia (BCA)"><option value="Bank CIMB Niaga"><option value="Bank Danamon"><option value="Bank Permata"><option value="Bank Panin"><option value="Bank Mega"><option value="Bank OCBC NISP"><option value="Bank Maybank Indonesia"><option value="Bank Sinarmas"><option value="Bank Muamalat"><option value="Bank Bukopin"></datalist><div class="form-floating mb-3 mt-3"><input type="text" inputmode="numeric" id="accountNumberInput" class="form-control" placeholder="Nomor Rekening Anda" required><label for="accountNumberInput">Nomor Rekening</label></div><div class="form-floating mb-3 mt-3"><input type="text" id="accountNameInput" class="form-control" placeholder="Nama Pemilik Rekening" required><label for="accountNameInput">Nama Pemilik Rekening</label></div><button id="nextButton" class="btn btn-primary mt-3 gradient-button fw-bold mt-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-circle-fill" viewBox="0 0 16 16"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/></svg>Lanjut ke Pilih Kegiatan</button></div><div id="step3" class="hidden" style="display:none"><div class="form-floating"><select id="activitySelect" class="form-select mb-3 editable" aria-label="Floating label select example"><option value="" disabled="disabled" selected="selected">Pilih salah satu</option></select><label for="activitySelect">Kegiatan yang akan kamu ikuti</label></div><div id="additionalOptions2" style="display:none"><div class="form-floating"><select id="additionalSelect2" class="form-select mb-3 editable" aria-label="Floating label select example"><option value="" disabled="disabled" selected="selected">Pilih salah satu</option><option value="Simposium">Simposium</option><option value="Seminar">Seminar</option></select><label for="additionalSelect2">Kegiatan simposium atau seminar</label></div></div><div id="additionalOptions" style="display:none"><div class="form-floating"><select id="additionalSelect" class="form-select mb-3 editable" aria-label="Floating label select example"><option value="" disabled="disabled" selected="selected">Pilih salah satu</option><option value="Kemampuan Literasi">Kemampuan Literasi</option><option value="Kemampuan Numerasi">Kemampuan Numerasi</option><option value="Karakter">Karakter</option><option value="Iklim Keamanan Sekolah">Iklim Keamanan Sekolah</option><option value="Iklim Kebhinekaan">Iklim Kebhinekaan</option><option value="Kualitas Pembelajaran">Kualitas Pembelajaran</option></select><label for="additionalSelect">Pilih tema Simposium</label></div></div><hr><div class="d-grid gap-2"><button id="submitFormButton" class="btn btn-primary gradient-button fw-bold mt-5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16"><path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"/></svg>Daftar sekarang</div></div></div><div class="formc" hidden><section class="text-white text-center py-5"><div class="container"><h1 class="display-6 text-white fw-bold">Resume Pendaftaran</h1><p class="lead">Terima kasih kakak telah mendaftar!. Festival Transformasi Pendidikan</p></div></section><div class="container cetakboardingpass bg-white p-5 rounded shadow"><h1 class="mb-4 fw-bold">Status Pendaftaran</h1><p class="lead">Festival Transformasi Pendidikan BBGP Jawa Tengah.</p><center><div id="qrcode"></div><button class="btnDiverifikasi btn btn-warning rounded-pill mt-3 fw-bold"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/><path d="m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05"/></svg>Sedang diverifikasi</button><div class="alert alert-warning mt-2 alrv" role="alert"><strong>Perhatian!</strong>Data pendaftaran sedang diverifikasi oleh panitia.</div><button class="btnTerdaftar btn btn-success rounded-pill mt-3 fw-bold" hidden><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/></svg>Terdaftar / Lulus</button><div class="alert alert-success mt-2 alrl" role="alert" hidden><strong>Selamat!</strong>Kakak telah terdaftar / lulus sebagai peserta kegiatan.</div><button class="btnTidakTerdaftar btn btn-danger rounded-pill mt-3 fw-bold" hidden><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"/></svg>Tidak terdaftar / Tidak Lulus</button><div class="alert alert-danger mt-2 alrtl" role="alert" hidden><strong>Maaf!</strong>Kakak tidak terdaftar / tidak lulus sebagai peserta kegiatan.</div></center><hr><div class="mt-4"><h5 class="fw-bold">Data Pendaftar:</h5><p>Detail data kakak yang terdaftar.</p><div class="mb-3 form-floating"><input type="text" id="regnuptk" class="form-control non-editable" disabled="disabled" placeholder="Inputan otomatis anda tidak perlu mengisi.."><label for="regnuptk">NUPTK</label></div><div class="mb-3 form-floating"><input type="text" id="regnama" class="form-control non-editable" disabled="disabled" placeholder="Inputan otomatis anda tidak perlu mengisi.."><label for="regnama">Nama Lengkap</label></div><div class="mb-3 form-floating"><input type="text" id="regjabatan" class="form-control non-editable" disabled="disabled" placeholder="Inputan otomatis anda tidak perlu mengisi.."><label for="regjabatan">Jabatan</label></div><div class="mb-3 form-floating"><input type="text" id="reginstansi" class="form-control non-editable" disabled="disabled" placeholder="Inputan otomatis anda tidak perlu mengisi.."><label for="reginstansi">Instansi</label></div><div class="mb-3 form-floating"><input type="text" id="regkabupaten" class="form-control non-editable" disabled="disabled" placeholder="Inputan otomatis anda tidak perlu mengisi.."><label for="regkabupaten">Kabupaten</label></div></div><hr><div class="mt-4"><h5 class="fw-bold">Detail Registrasi:</h5><p>Detail kegiatan yang kakak ikuti.</p><div class="mb-3 form-floating"><input type="text" id="regkodeKegiatan" class="form-control non-editable" disabled="disabled" placeholder="Inputan otomatis anda tidak perlu mengisi.."><label for="regkodeKegiatan">Kode Kegiatan</label></div><div class="mb-3 form-floating"><textarea id="regkegiatan" class="form-control non-editable" disabled="disabled" placeholder="Inputan otomatis anda tidak perlu mengisi.." style="height:100px"></textarea><label for="regkegiatan">Kegiatan</label></div><div class="mb-3 form-floating"><input type="text" id="regsubKegiatan" class="form-control non-editable" disabled="disabled" placeholder="Inputan otomatis anda tidak perlu mengisi.."><label for="regsubKegiatan">Sub Kegiatan</label></div><div class="mb-3 form-floating"><input type="text" id="regsubTema" class="form-control non-editable" disabled="disabled" placeholder="Inputan otomatis anda tidak perlu mengisi.."><label for="regsubTema">Sub Tema</label></div><div class="d-grid gap-2"><button id="boardingPassButton" class="btn btn-primary mt-3 gradient-button fw-bold mt-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-circle-fill" viewBox="0 0 16 16"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/></svg>Unduh Bukti Pendaftaran</button></div></div><hr><div class="mt-4 formunggah" hidden><h5 class="fw-bold">Detail Naskah:</h5><p>Naskah Simposium sesuai tema yang kakak pilih dan sematkan link pada rentan waktu 23-25 Oktober 2024</p><div class="form-floating mb-3 mt-3"><input type="text" id="judulnaskahInput" class="form-control editable" placeholder="Isi judul naskah anda"><label for="judulnaskahInput">Judul Naskah</label></div><div class="form-floating mb-3"><input type="text" id="naskahInput" class="form-control editable" placeholder="Isi link google drive naskah anda"><label for="naskahInput">Link Google Drive Naskah Mode View</label><div class="d-grid gap-2"><button class="btn btn-outline-primary fw-bold mt-2" id="cekNaskahBtn">Cek Link Naskah</button></div></div><div class="form-floating mb-3"><input type="text" id="suratInput" class="form-control editable" placeholder="Isi link google drive surat pernyataan anda"><label for="suratInput">Link Google Drive Surat Pernyataan Mode View</label><div class="d-grid gap-2"><button class="btn btn-outline-primary fw-bold mt-2 text-left" id="cekSuratBtn">Cek Link Surat</button></div></div><hr><div class="d-grid gap-2"><button id="unggahNaskahButton" class="btn btn-primary fw-bold mt-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16"><path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"/></svg>Unggah Naskah</button></div></div></div></div><a target="_blank" href="https://bbgpjateng.kemdikbud.go.id/"><img src="https://i.ibb.co.com/xf7zM5g/TULISAN-BBGP-3-1.png" class="mt-4 mb-1" width="150px" alt="bbgpjateng" border="0"></a><br><small class="mt-2 mb-5 text-white" style="font-size:10px">Balai Besar Guru Penggerak Jawa Tengah &copy; 2024<br>Festival Transformasi Pendidikan</small></body></html>
